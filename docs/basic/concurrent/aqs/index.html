<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=60447&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>AQS | 海阔集</title>
<meta name="description" content="**AQS**是`AbstractQueuedSynchronizer`的简称，即`抽象的队列同步器`">
<meta property="og:url" content="http://localhost:60447/docs/basic/concurrent/aqs/">
  <meta property="og:site_name" content="海阔集">
  <meta property="og:title" content="AQS">
  <meta property="og:description" content="**AQS**是`AbstractQueuedSynchronizer`的简称，即`抽象的队列同步器`">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2025-02-09T23:36:01+08:00">
    <meta property="article:tag" content="并发编程">

  <meta itemprop="name" content="AQS">
  <meta itemprop="description" content="**AQS**是`AbstractQueuedSynchronizer`的简称，即`抽象的队列同步器`">
  <meta itemprop="dateModified" content="2025-02-09T23:36:01+08:00">
  <meta itemprop="wordCount" content="518">
  <meta itemprop="keywords" content="并发编程">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="AQS">
  <meta name="twitter:description" content="**AQS**是`AbstractQueuedSynchronizer`的简称，即`抽象的队列同步器`">
<link href="/scss/main.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg width="800" height="800" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23.3 8.40007 21.82 6.40008C21.7248 6.27314 21.6008 6.17066 21.4583 6.10111 21.3157 6.03156 21.1586 5.99693 21 6.00008H11.2C11.0555 6.00007 10.9128 6.03135 10.7816 6.09177 10.6504 6.15219 10.5339 6.24031 10.44 6.35007L8.71998 8.35008C8.57227 8.53401 8.49435 8.76424 8.49998 9.00008V16.2901C8.50262 18.0317 9.19567 19.7013 10.4272 20.9328c1.2316 1.2316 2.9011 1.9246 4.6428 1.9273h1.86C18.6716 22.8574 20.3412 22.1644 21.5728 20.9328c1.2315-1.2315 1.9245-2.9011 1.9272-4.6427V9.00008C23.5 8.7837 23.4298 8.57317 23.3 8.40007z" fill="#ffcc80"/><path d="M29.78 28.38l-4-5C25.664 23.2321 25.5086 23.1198 25.3318 23.0562 25.1549 22.9925 24.9637 22.98 24.78 23.02L16 25 7.21999 23C7.03632 22.96 6.84507 22.9725 6.6682 23.0362 6.49133 23.0998 6.33598 23.2121 6.21999 23.36l-4 5C2.10392 28.5064 2.03116 28.6823 2.00995 28.8679 1.98874 29.0534 2.01993 29.2413 2.09999 29.41 2.17815 29.5839 2.3044 29.7319 2.46385 29.8364 2.62331 29.9409 2.80933 29.9977 2.99999 30H29C29.1885 29.9995 29.373 29.9457 29.5322 29.8448 29.6914 29.744 29.8189 29.6002 29.9 29.43 29.98 29.2613 30.0112 29.0734 29.99 28.8879 29.9688 28.7023 29.8961 28.5264 29.78 28.38z" fill="#01579b"/><path d="M29.29 6.00003l-13-4C16.0999 1.95002 15.9001 1.95002 15.71 2.00003l-13 4c-.21258.06419-.39774.19732-.5263.37838C2.05515 6.55947 1.99052 6.77817 2 7.00003 1.9917 7.22447 2.0592 7.44518 2.19163 7.62659c.13242.1814.32207.31295.53837.37344L15.73 11.6C15.906 11.6534 16.094 11.6534 16.27 11.6l13-3.59997C29.4863 7.93954 29.6759 7.80799 29.8084 7.62659 29.9408 7.44518 30.0083 7.22447 30 7.00003 30.0095 6.77817 29.9448 6.55947 29.8163 6.37841 29.6877 6.19735 29.5026 6.06422 29.29 6.00003z" fill="#01579b"/><path d="M11.22 6C11.0756 5.99999 10.9328 6.03127 10.8016 6.09169 10.6704 6.15211 10.5539 6.24023 10.46 6.35l-1.72 2C8.58509 8.53114 8.49998 8.76166 8.5 9v7.29C8.50264 18.0317 9.19569 19.7012 10.4272 20.9328c1.2316 1.2315 2.9011 1.9246 4.6428 1.9272H16V6H11.22z" fill="#ffe0b2"/><path d="M7.21999 23C7.03632 22.96 6.84507 22.9725 6.6682 23.0362 6.49133 23.0998 6.33598 23.2121 6.21999 23.36l-4 5C2.10392 28.5064 2.03116 28.6823 2.00995 28.8679 1.98874 29.0534 2.01993 29.2413 2.09999 29.41 2.17815 29.5839 2.3044 29.7319 2.46385 29.8364 2.62331 29.9409 2.80933 29.9977 2.99999 30H16V25L7.21999 23z" fill="#0277bd"/><path d="M15.71 2.00002l-13 4C2.49742 6.06422 2.31226 6.19734 2.1837 6.3784c-.12855.18107-.19318.39977-.1837.62162C1.9917 7.22447 2.0592 7.44518 2.19163 7.62658 2.32405 7.80799 2.5137 7.93954 2.73 8.00002L15.73 11.6C15.8194 11.6146 15.9106 11.6146 16 11.6V2.00002C15.9039 1.98469 15.8061 1.98469 15.71 2.00002z" fill="#0277bd"/><path d="M2.73 8.00003l5.77 1.56V16.29C8.50264 18.0317 9.19569 19.7013 10.4272 20.9328c1.2316 1.2315 2.9011 1.9246 4.6428 1.9272h1.86C18.6717 22.8574 20.3412 22.1643 21.5728 20.9328c1.2315-1.2315 1.9246-2.9011 1.9272-4.6428V9.56003l5.77-1.56C29.4863 7.93954 29.6759 7.80799 29.8084 7.62659 29.9408 7.44518 30.0083 7.22447 30 7.00003 30.0095 6.77817 29.9448 6.55947 29.8163 6.37841 29.6877 6.19735 29.5026 6.06422 29.29 6.00003l-13-4C16.0999 1.95002 15.9001 1.95002 15.71 2.00003l-13 4c-.21258.06419-.39774.19732-.5263.37838C2.05515 6.55947 1.99052 6.77817 2 7.00003 1.9917 7.22447 2.0592 7.44518 2.19163 7.62659c.13242.1814.32207.31295.53837.37344zM21.5 16.29C21.4974 17.5013 21.015 18.6621 20.1586 19.5186 19.3021 20.3751 18.1412 20.8574 16.93 20.86H15.07C13.8588 20.8574 12.6979 20.3751 11.8414 19.5186 10.985 18.6621 10.5026 17.5013 10.5 16.29V10.11l5.23 1.45C15.906 11.6134 16.094 11.6134 16.27 11.56l5.23-1.45v6.18zM16 4.05003l9.44 2.95-9.44 2.56-9.44-2.56 9.44-2.95z" fill="#263238"/><path d="M25.78 23.38C25.664 23.2321 25.5086 23.1198 25.3318 23.0562 25.1549 22.9925 24.9637 22.98 24.78 23.02L16 25 7.21999 23C7.03632 22.96 6.84507 22.9725 6.6682 23.0362 6.49133 23.0998 6.33598 23.2121 6.21999 23.36l-4 5C2.10392 28.5064 2.03116 28.6823 2.00995 28.8679 1.98874 29.0534 2.01993 29.2413 2.09999 29.41 2.17815 29.5839 2.3044 29.7319 2.46385 29.8364 2.62331 29.9409 2.80933 29.9977 2.99999 30H29C29.1885 29.9995 29.373 29.9457 29.5322 29.8448 29.6914 29.744 29.8189 29.6002 29.9 29.43 29.98 29.2613 30.0112 29.0734 29.99 28.8879 29.9688 28.7023 29.8961 28.5264 29.78 28.38l-4-5zM5.07999 28l2.31-2.89L15.78 27C15.9251 27.0299 16.0748 27.0299 16.22 27l8.39-1.87L26.92 28H5.07999z" fill="#263238"/></svg></span><span class="navbar-brand__name">海阔集</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/leetcode/"><span>Alog</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/docs/"><span>Doc</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/interview/"><span>Interview</span></a>
      </li>
      <li class="td-light-dark-menu nav-item dropdown">
        <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="check2" viewBox="0 0 16 16">
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
  </symbol>
  <symbol id="circle-half" viewBox="0 0 16 16">
    <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
  </symbol>
  <symbol id="moon-stars-fill" viewBox="0 0 16 16">
    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>
  </symbol>
  <symbol id="sun-fill" viewBox="0 0 16 16">
    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
  </symbol>
</svg>

<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center"
        id="bd-theme"
        type="button"
        aria-expanded="false"
        data-bs-toggle="dropdown"
        data-bs-display="static"
        aria-label="Toggle theme (auto)">
  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg>
</button>
<ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#sun-fill"></use></svg>
      Light
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
      <svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"></use></svg>
      Dark
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
  <li>
    <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
      <svg class="bi me-2 opacity-50"><use href="#circle-half"></use></svg>
      Auto
      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg>
    </button>
  </li>
</ul>

      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/offline-search-index.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" title="Documents" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Doc</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsoverview-li">
  <a href="/docs/overview/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsoverview"><span class="">Java Overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docsbasic-li">
  <a href="/docs/basic/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsbasic"><span class="">Java基础能力</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docsbasicconcurrent-li">
  <a href="/docs/basic/concurrent/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsbasicconcurrent"><span class="">Java并发编程</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsbasicconcurrentaqs-li">
  <a href="/docs/basic/concurrent/aqs/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrentaqs"><span class="td-sidebar-nav-active-item">AQS</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrentjmme58685e5ad98e6a8a1e59e8b-li">
  <a href="/docs/basic/concurrent/jmm%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrentjmme58685e5ad98e6a8a1e59e8b"><span class="">JMM内存模型</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrentreentrantlocke9878de585a5e99481-li">
  <a href="/docs/basic/concurrent/reentrantlock%E9%87%8D%E5%85%A5%E9%94%81/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrentreentrantlocke9878de585a5e99481"><span class="">ReentrantLock重入锁</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrentsynchronizede585b3e994aee5ad97-li">
  <a href="/docs/basic/concurrent/synchronized%E5%85%B3%E9%94%AE%E5%AD%97/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrentsynchronizede585b3e994aee5ad97"><span class="">synchronized关键字</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrentthreadlocal-li">
  <a href="/docs/basic/concurrent/threadlocal/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrentthreadlocal"><span class="">ThreadLocal</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrentvolatilee585b3e994aee5ad97-li">
  <a href="/docs/basic/concurrent/volatile%E5%85%B3%E9%94%AE%E5%AD%97/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrentvolatilee585b3e994aee5ad97"><span class="">volatile关键字</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente5a49ae7babfe7a88be585a5e997a8-li">
  <a href="/docs/basic/concurrent/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%85%A5%E9%97%A8/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente5a49ae7babfe7a88be585a5e997a8"><span class="">多线程入门</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente7babfe7a88be4b88ee8bf9be7a88b-li">
  <a href="/docs/basic/concurrent/%E7%BA%BF%E7%A8%8B%E4%B8%8E%E8%BF%9B%E7%A8%8B/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente7babfe7a88be4b88ee8bf9be7a88b"><span class="">线程</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente7babfe7a88be5ae89e585a8e997aee9a298-li">
  <a href="/docs/basic/concurrent/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente7babfe7a88be5ae89e585a8e997aee9a298"><span class="">线程安全问题</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente7babfe7a88be6b1a0-li">
  <a href="/docs/basic/concurrent/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente7babfe7a88be6b1a0"><span class="">线程池</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente7babfe7a88be7949fe591bde591a8e69c9f-li">
  <a href="/docs/basic/concurrent/%E7%BA%BF%E7%A8%8B%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente7babfe7a88be7949fe591bde591a8e69c9f"><span class="">线程生命周期</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente7babfe7a88be9809ae4bfa1-li">
  <a href="/docs/basic/concurrent/%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente7babfe7a88be9809ae4bfa1"><span class="">线程通信</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente887aae6978be99481e4b88eclhe99481-li">
  <a href="/docs/basic/concurrent/%E8%87%AA%E6%97%8B%E9%94%81%E4%B8%8Eclh%E9%94%81/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente887aae6978be99481e4b88eclhe99481"><span class="">自旋锁与CLH锁</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente88eb7e58f96e7babfe7a88be689a7e8a18ce7bb93e69e9c-li">
  <a href="/docs/basic/concurrent/%E8%8E%B7%E5%8F%96%E7%BA%BF%E7%A8%8B%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente88eb7e58f96e7babfe7a88be689a7e8a18ce7bb93e69e9c"><span class="">获取线程执行结果</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente9809ae4bfa1e5b7a5e585b7e7b1bb-li">
  <a href="/docs/basic/concurrent/%E9%80%9A%E4%BF%A1%E5%B7%A5%E5%85%B7%E7%B1%BB/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente9809ae4bfa1e5b7a5e585b7e7b1bb"><span class="">通信工具类</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrentcascompare-and-swap-li">
  <a href="/docs/basic/concurrent/cascompare-and-swap/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrentcascompare-and-swap"><span class=""></span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrentconditione7ad89e5be85e9809ae79fa5e69da1e4bbb6-li">
  <a href="/docs/basic/concurrent/condition%E7%AD%89%E5%BE%85%E9%80%9A%E7%9F%A5%E6%9D%A1%E4%BB%B6/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrentconditione7ad89e5be85e9809ae79fa5e69da1e4bbb6"><span class=""></span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente6a8a1e69dbfe696b9e6b395e6a8a1e5bc8f-li">
  <a href="/docs/basic/concurrent/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente6a8a1e69dbfe696b9e6b395e6a8a1e5bc8f"><span class=""></span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente7babfe7a88be998bbe5a19ee4b88ee594a4e98692-li">
  <a href="/docs/basic/concurrent/%E7%BA%BF%E7%A8%8B%E9%98%BB%E5%A1%9E%E4%B8%8E%E5%94%A4%E9%86%92/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente7babfe7a88be998bbe5a19ee4b88ee594a4e98692"><span class=""></span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasicconcurrente998bbe5a19ee9989fe58897-li">
  <a href="/docs/basic/concurrent/%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasicconcurrente998bbe5a19ee9989fe58897"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsbasiccontainer-li">
  <a href="/docs/basic/container/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsbasiccontainer"><span class="">Java集合框架</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasiccontainerlinkedlist-li">
  <a href="/docs/basic/container/linkedlist/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasiccontainerlinkedlist"><span class="">LinkedList</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbasiccontainerheap-li">
  <a href="/docs/basic/container/heap/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsbasiccontainerheap"><span class=""></span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsgeneral-li">
  <a href="/docs/general/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsgeneral"><span class="">通用能力</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsgeneralos-li">
  <a href="/docs/general/os/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsgeneralos"><span class="">操作系统</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgeneraloscpue9ab98e9809fe7bc93e5ad98-li">
  <a href="/docs/general/os/cpu%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsgeneraloscpue9ab98e9809fe7bc93e5ad98"><span class="">CPU Cache 高速缓存</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgeneralose5ad98e582a8e599a8e79a84e5b182e6aca1e7bb93e69e84-li">
  <a href="/docs/general/os/%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsgeneralose5ad98e582a8e599a8e79a84e5b182e6aca1e7bb93e69e84"><span class="">存储器的层次结构</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgeneralose6938de4bd9ce7b3bbe7bb9fe59fbae69cace789b9e680a7-li">
  <a href="/docs/general/os/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E7%89%B9%E6%80%A7/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsgeneralose6938de4bd9ce7b3bbe7bb9fe59fbae69cace789b9e680a7"><span class="">操作系统基本特性</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgeneralose8bf9be7a88be5908ce6ada5-li">
  <a href="/docs/general/os/%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsgeneralose8bf9be7a88be5908ce6ada5"><span class="">进程同步</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgeneralose8bf9be7a88be79a84e78ab6e68081e4b88ee8bdace68da2-li">
  <a href="/docs/general/os/%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%8E%E8%BD%AC%E6%8D%A2/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsgeneralose8bf9be7a88be79a84e78ab6e68081e4b88ee8bdace68da2"><span class="">进程的状态与转换</span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsadvanced-li">
  <a href="/docs/advanced/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsadvanced"><span class="">Java进阶能力</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsadvancedmq-li">
  <a href="/docs/advanced/mq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsadvancedmq"><span class="">消息队列</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedmqrocketmq-li">
  <a href="/docs/advanced/mq/rocketmq/" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedmqrocketmq"><span class=""></span></a>
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/google/docsy-example/tree/main/C:%5cUsers%5chamhuo%5cDocuments%5cGitHub%5chamsite%5ccontent%5cen%5cdocs%5cBasic%5cConcurrent%5cAQS.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/google/docsy-example/edit/main/C:%5cUsers%5chamhuo%5cDocuments%5cGitHub%5chamsite%5ccontent%5cen%5cdocs%5cBasic%5cConcurrent%5cAQS.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/google/docsy-example/new/main/C:/Users/hamhuo/Documents/GitHub/hamsite/content/en/docs/Basic/Concurrent?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/google/docsy-example/issues/new?title=AQS" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/google/docsy/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="/docs/basic/concurrent/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            <div class="taxonomy taxonomy-terms-cloud taxo-tags">
      <h5 class="taxonomy-title">Tag Cloud</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/list/" data-taxonomy-term="list"><span class="taxonomy-label">List</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E5%88%86%E6%B2%BB/" data-taxonomy-term="%E5%88%86%E6%B2%BB"><span class="taxonomy-label">分治</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E5%8F%8C%E6%8C%87%E9%92%88/" data-taxonomy-term="%E5%8F%8C%E6%8C%87%E9%92%88"><span class="taxonomy-label">双指针</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" data-taxonomy-term="%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B"><span class="taxonomy-label">并发编程</span><span class="taxonomy-count">17</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" data-taxonomy-term="%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="taxonomy-label">操作系统</span><span class="taxonomy-count">7</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" data-taxonomy-term="%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"><span class="taxonomy-label">消息队列</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E7%9F%A9%E9%98%B5/" data-taxonomy-term="%E7%9F%A9%E9%98%B5"><span class="taxonomy-label">矩阵</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E9%80%92%E5%BD%92/" data-taxonomy-term="%E9%80%92%E5%BD%92"><span class="taxonomy-label">递归</span><span class="taxonomy-count">3</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E9%93%BE%E8%A1%A8/" data-taxonomy-term="%E9%93%BE%E8%A1%A8"><span class="taxonomy-label">链表</span><span class="taxonomy-count">10</span></a></li>
        </ul>
    </div>
  <div class="taxonomy taxonomy-terms-cloud taxo-categories">
      <h5 class="taxonomy-title">Categories</h5>
      <ul class="taxonomy-terms">
        <li><a class="taxonomy-term" href="http://localhost:60447/categories/java%E5%9F%BA%E7%A1%80%E8%83%BD%E5%8A%9B/" data-taxonomy-term="java%E5%9F%BA%E7%A1%80%E8%83%BD%E5%8A%9B"><span class="taxonomy-label">Java基础能力</span><span class="taxonomy-count">18</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/categories/java%E8%BF%9B%E9%98%B6%E8%83%BD%E5%8A%9B/" data-taxonomy-term="java%E8%BF%9B%E9%98%B6%E8%83%BD%E5%8A%9B"><span class="taxonomy-label">Java进阶能力</span><span class="taxonomy-count">2</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/categories/java%E9%9D%A2%E8%AF%95/" data-taxonomy-term="java%E9%9D%A2%E8%AF%95"><span class="taxonomy-label">Java面试</span><span class="taxonomy-count">1</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/categories/%E7%AE%97%E6%B3%95/" data-taxonomy-term="%E7%AE%97%E6%B3%95"><span class="taxonomy-label">算法</span><span class="taxonomy-count">10</span></a></li>
        <li><a class="taxonomy-term" href="http://localhost:60447/categories/%E9%80%9A%E7%94%A8%E8%83%BD%E5%8A%9B/" data-taxonomy-term="%E9%80%9A%E7%94%A8%E8%83%BD%E5%8A%9B"><span class="taxonomy-label">通用能力</span><span class="taxonomy-count">5</span></a></li>
        </ul>
    </div>
  
	
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/docs/">Doc</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/basic/">Java基础能力</a></li>
  <li class="breadcrumb-item">
    <a href="/docs/basic/concurrent/">Java并发编程</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    AQS</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>AQS</h1>
	<div class="lead"><strong>AQS</strong>是<code>AbstractQueuedSynchronizer</code>的简称，即<code>抽象的队列同步器</code></div>
	<header class="article-meta">
		<div class="taxonomy taxonomy-terms-article taxo-tags">
  <h5 class="taxonomy-title">Tags:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="http://localhost:60447/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" data-taxonomy-term="%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B"><span class="taxonomy-label">并发编程</span></a></li>
    </ul>
</div>
<div class="taxonomy taxonomy-terms-article taxo-categories">
  <h5 class="taxonomy-title">Categories:</h5>
  <ul class="taxonomy-terms">
    <li><a class="taxonomy-term" href="http://localhost:60447/categories/java%E5%9F%BA%E7%A1%80%E8%83%BD%E5%8A%9B/" data-taxonomy-term="java%E5%9F%BA%E7%A1%80%E8%83%BD%E5%8A%9B"><span class="taxonomy-label">Java基础能力</span></a></li>
    </ul>
</div>

  </header>
	<p><strong>AQS</strong>是<code>AbstractQueuedSynchronizer</code>的简称，即<code>抽象的队列同步器</code></p>
<ul>
<li>抽象：抽象类，只实现一些主要逻辑，有些方法由子类实现；</li>
<li>队列：使用先进先出（FIFO）的队列存储数据；</li>
<li>同步：实现了同步的功能。</li>
</ul>
<h4 id="为什么需要-aqs">为什么需要 <code>AQS</code><a class="td-heading-self-link" href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e9%9c%80%e8%a6%81-aqs" aria-label="Heading self-link"></a></h4>
<p>AQS 是一个用来构建锁和同步器的框架，使用 AQS 能简单且高效地构造出应用广泛的同步器
简单的说,  存储并管理线程同步的模板</p>
<p>具体的同步器（如 <code>ReentrantLock</code>、<code>CountDownLatch</code>、<code>Semaphore</code>, <a href="/docs/basic/concurrent/%E8%8E%B7%E5%8F%96%E7%BA%BF%E7%A8%8B%E6%89%A7%E8%A1%8C%E7%BB%93%E6%9E%9C/">FutureTask</a>等）是通过继承 <code>AQS</code> 并实现一些抽象方法来实现资源的具体获取和释放行为的。</p>
<h4 id="aqs的作用是什么"><code>AQS</code>的作用是什么?<a class="td-heading-self-link" href="#aqs%e7%9a%84%e4%bd%9c%e7%94%a8%e6%98%af%e4%bb%80%e4%b9%88" aria-label="Heading self-link"></a></h4>
<blockquote>
<p>了解
<a href="/docs/basic/concurrent/%E8%87%AA%E6%97%8B%E9%94%81%E4%B8%8Eclh%E9%94%81/">自旋锁与CLH锁</a></p></blockquote>
<p><code>AQS</code> 是一个 <strong>抽象类</strong>，它为具体的同步器提供了一个通用的执行框架。
它定义了如何获取和释放共享资源的基本流程，但并没有实现具体的逻辑。</p>
<p><code>AQS</code> 提供了同步器所需要的 <strong>框架和基础设施</strong>，比如：</p>
<ol>
<li>如何在多个线程间协调资源的竞争。</li>
<li>如何管理线程的队列（阻塞队列）以等待资源。</li>
</ol>
<blockquote>
<p>其中AQS 的核心数据结构是基于<a href="/docs/basic/concurrent/%E8%87%AA%E6%97%8B%E9%94%81%E4%B8%8Eclh%E9%94%81/">CLH 锁</a>改进的, 详情下述</p></blockquote>
<ol start="3">
<li>线程的挂起与唤醒等机制。</li>
</ol>
<h4 id="aqs的数据结构">AQS的数据结构<a class="td-heading-self-link" href="#aqs%e7%9a%84%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84" aria-label="Heading self-link"></a></h4>
<p>既然是控制线程, 那么数据结构应对并发相应的优化
AQS的核心数据结构是基于 CLH队列锁改进的
<img src="https://raw.githubusercontent.com/hamhuo-hub/HamPic/img/img/Pasted%20image%2020250203211340.png" alt="Pasted image 20250203211340.png">
CLH队列锁有如下缺点</p>
<ol>
<li>仍然基于自旋, 长时间自旋下CPU占用高</li>
<li>功能单一, 不能挂起, 不能共享读, 只支持独占等
针对以上缺点, AQS进行改造</li>
<li>AQS 将自旋操作改为阻塞线程操作。</li>
<li>AQS 对 CLH 锁进行改造和扩展, 扩展每个节点的状态、显式的维护前驱节点和后继节点</li>
</ol>
<p>AQS 内部使用了一个<a href="/docs/basic/concurrent/volatile%E5%85%B3%E9%94%AE%E5%AD%97/">volatile关键字</a> 的变量 <code>state</code> 来作为线程的状态标识。</p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e78284">volatile</span> <span style="color:#e78284">int</span> waitStatus;
</span></span></code></pre></div><p>该变量有如下状态, AQS提供原子读写
![[content/en/docs/Basic/Concurrent/Pasted image 20250203210552.png]]</p>
<ul>
<li>CANCELLED：表示当前节点（对应的线程）已被取消。当等待超时或被中断，会触发进入为此状态，进入该状态后节点状态不再变化；</li>
<li>SIGNAL：后面节点等待当前节点唤醒；</li>
<li>CONDITION：当前线程阻塞在Condition，如果其他线程调用了Condition的signal方法，这个节点将从等待队列转移到同步队列队尾，等待获取同步锁；</li>
</ul>
<blockquote>
<p>了解<a href="/docs/basic/concurrent/condition%E7%AD%89%E5%BE%85%E9%80%9A%E7%9F%A5%E6%9D%A1%E4%BB%B6/">Condition等待通知条件</a></p></blockquote>
<ul>
<li>PROPAGATE：共享模式，前置节点唤醒后面节点后，唤醒操作无条件传播下去；</li>
<li>0：中间状态，当前节点后面的节点已经唤醒，但是当前节点线程还没有执行完成。
状态多了不少, 但是AQS为了优化, 抛弃了自旋设计,这导致线程被阻塞时没办法获取前驱节点的状态
所以AQS显式维护前后节点, 在锁释放时主动通知后继线程解除阻塞
<img src="https://raw.githubusercontent.com/hamhuo-hub/HamPic/img/img/Pasted%20image%2020250203211000.png" alt="Pasted image 20250203211000.png"></li>
</ul>
<p><em>(T1 释放锁后主动唤醒 T2，使 T2 检测到锁已释放，获取锁成功。)</em></p>
<blockquote>
<p>在释放锁时，如果当前节点的后驱节点不可用时，将从利用队尾指针 Tail 从尾部遍历到直到找到当前节点正确的后驱节点。
这是因为双端队列的插入没有相应的原子操作, 因此后驱节点的设置并非作为原子性插入操作的一部分，而仅是在节点被插入后简单地赋值</p></blockquote>
<p>AQS还实现了共享读
资源有两种共享模式，或者说两种同步方式：</p>
<ul>
<li>
<p>独占模式（Exclusive）：资源是独占的，一次只能有一个线程获取。如 <a href="/docs/basic/concurrent/reentrantlock%E9%87%8D%E5%85%A5%E9%94%81/">ReentrantLock重入锁</a> <a href="/docs/basic/concurrent/synchronized%E5%85%B3%E9%94%AE%E5%AD%97/">synchronized关键字</a></p>
</li>
<li>
<p>共享模式（Share）：同时可以被多个线程获取，具体的资源个数可以通过参数指定。如 <a href="/docs/basic/concurrent/%E9%80%9A%E4%BF%A1%E5%B7%A5%E5%85%B7%E7%B1%BB/">Semaphore/CountDownLatch</a></p>
</li>
</ul>
<p>这两种模式是在内部类 <code>Node</code> 中实现的</p>
<p>Node源码</p>
<blockquote>
<p>可以看到 node中的状态信息都是常量, 无法修改的</p></blockquote>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e78284">static</span> <span style="color:#e78284">final</span> <span style="color:#e78284">class</span> <span style="color:#e5c890">Node</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 标记一个结点（对应的线程）在共享模式下等待</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">static</span> <span style="color:#e78284">final</span> Node SHARED <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#ca9ee6">new</span> Node();
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 标记一个结点（对应的线程）在独占模式下等待</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">static</span> <span style="color:#e78284">final</span> Node EXCLUSIVE <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#ef9f76">null</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// waitStatus的值，表示该结点（对应的线程）已被取消</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">static</span> <span style="color:#e78284">final</span> <span style="color:#e78284">int</span> CANCELLED <span style="color:#99d1db;font-weight:bold">=</span> 1;
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// waitStatus的值，表示后继结点（对应的线程）需要被唤醒</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">static</span> <span style="color:#e78284">final</span> <span style="color:#e78284">int</span> SIGNAL <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#99d1db;font-weight:bold">-</span>1;
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// waitStatus的值，表示该结点（对应的线程）在等待某一条件</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">static</span> <span style="color:#e78284">final</span> <span style="color:#e78284">int</span> CONDITION <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#99d1db;font-weight:bold">-</span>2;
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">/*waitStatus的值，表示有资源可用，新head结点需要继续唤醒后继结点（共享模式下，多线程并发释放资源，而head唤醒其后继结点后，需要把多出来的资源留给后面的结点；设置新的head结点时，会继续唤醒其后继结点）*/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">static</span> <span style="color:#e78284">final</span> <span style="color:#e78284">int</span> PROPAGATE <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#99d1db;font-weight:bold">-</span>3;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 等待状态，取值范围，-3，-2，-1，0，1</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">volatile</span> <span style="color:#e78284">int</span> waitStatus;
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">volatile</span> Node prev; <span style="color:#737994;font-style:italic">// 前驱结点</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">volatile</span> Node next; <span style="color:#737994;font-style:italic">// 后继结点</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">volatile</span> Thread thread; <span style="color:#737994;font-style:italic">// 结点对应的线程</span>
</span></span><span style="display:flex;"><span>    Node nextWaiter; <span style="color:#737994;font-style:italic">// 等待队列里下一个等待条件的结点</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 判断共享模式的方法</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">final</span> <span style="color:#e78284">boolean</span> <span style="color:#8caaee">isShared</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">return</span> nextWaiter <span style="color:#99d1db;font-weight:bold">==</span> SHARED;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Node(Thread thread, Node mode) {     <span style="color:#737994;font-style:italic">// Used by addWaiter</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">this</span>.<span style="color:#8caaee">nextWaiter</span> <span style="color:#99d1db;font-weight:bold">=</span> mode;
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">this</span>.<span style="color:#8caaee">thread</span> <span style="color:#99d1db;font-weight:bold">=</span> thread;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 其它方法忽略，可以参考具体的源码</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#737994;font-style:italic">// AQS里面的addWaiter私有方法</span>
</span></span><span style="display:flex;"><span><span style="color:#e78284">private</span> Node <span style="color:#8caaee">addWaiter</span>(Node mode) {
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 使用了Node的这个构造函数</span>
</span></span><span style="display:flex;"><span>    Node node <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#ca9ee6">new</span> Node(Thread.<span style="color:#8caaee">currentThread</span>(), mode);
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 其它代码省略</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="aqs源码解析">AQS源码解析<a class="td-heading-self-link" href="#aqs%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90" aria-label="Heading self-link"></a></h4>
<p>AQS 的设计是基于<a href="/docs/basic/concurrent/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/">模板方法模式</a>的，它有一些方法必须要子类实现，它们主要有：</p>
<ul>
<li><code>isHeldExclusively()</code>：该线程是否正在独占资源。只有用到 condition 才需要去实现它。</li>
<li><code>tryAcquire(int)</code>：独占方式。尝试获取资源，成功则返回 true，失败则返回 false。</li>
<li><code>tryRelease(int)</code>：独占方式。尝试释放资源，成功则返回 true，失败则返回 false。</li>
<li><code>tryAcquireShared(int)</code>：共享方式。尝试获取资源。负数表示失败；0 表示成功，但没有剩余可用资源；正数表示成功，且有剩余资源。</li>
<li><code>tryReleaseShared(int)</code>：共享方式。尝试释放资源，如果释放后允许唤醒后续等待结点返回 true，否则返回 false。</li>
</ul>
<blockquote>
<p>比较特殊的是, 这里的抽象方法并没有加 <code>abstract</code> 关键字
这是因为并非AQS的所有抽象方法都需要子类实现, 所以子类只重写需要的方法就行</p></blockquote>
<p>子类不是重点, 我们来看模板类, 也就是AQS的逻辑</p>
<h5 id="获取资源">获取资源<a class="td-heading-self-link" href="#%e8%8e%b7%e5%8f%96%e8%b5%84%e6%ba%90" aria-label="Heading self-link"></a></h5>
<p>获取资源的入口是 <code>acquire(int arg)</code>方法。arg 是要获取的资源个数，在独占模式下始终为 1。我们先来看看这个方法的逻辑：</p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e78284">public</span> <span style="color:#e78284">final</span> <span style="color:#e78284">void</span> <span style="color:#8caaee">accquire</span>(<span style="color:#e78284">int</span> arg) {
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// tryAcquire 再次尝试获取锁资源，如果尝试成功，返回true，尝试失败返回false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">if</span> (<span style="color:#99d1db;font-weight:bold">!</span>tryAcquire(arg) <span style="color:#99d1db;font-weight:bold">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#737994;font-style:italic">// 走到这，代表获取锁资源失败，需要将当前线程封装成一个Node，追加到AQS的队列中</span>
</span></span><span style="display:flex;"><span>        acquireQueued(addWaiter(Node.<span style="color:#8caaee">EXCLUSIVE</span>), arg))
</span></span><span style="display:flex;"><span>        <span style="color:#737994;font-style:italic">// 线程中断</span>
</span></span><span style="display:flex;"><span>        selfInterrupt();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>首先调用 <code>tryAcquire</code> 尝试去获取资源。如果获取资源失败，就通过 <code>addWaiter(Node.EXCLUSIVE)</code> 方法把这个线程插入到等待队列中。其中传入的参数代表要插入的 Node 是独占式的。</p>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e78284">private</span> Node <span style="color:#8caaee">addWaiter</span>(Node mode) {
</span></span><span style="display:flex;"><span> <span style="color:#737994;font-style:italic">//创建 Node 类，并且设置 thread 为当前线程，设置为排它锁</span>
</span></span><span style="display:flex;"><span> Node node <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#ca9ee6">new</span> Node(Thread.<span style="color:#8caaee">currentThread</span>(), mode);
</span></span><span style="display:flex;"><span> <span style="color:#737994;font-style:italic">// 获取 AQS 中队列的尾部节点</span>
</span></span><span style="display:flex;"><span> Node pred <span style="color:#99d1db;font-weight:bold">=</span> tail;
</span></span><span style="display:flex;"><span> <span style="color:#737994;font-style:italic">// 如果 tail == null，说明是空队列，</span>
</span></span><span style="display:flex;"><span> <span style="color:#737994;font-style:italic">// 不为 null，说明现在队列中有数据，</span>
</span></span><span style="display:flex;"><span> <span style="color:#ca9ee6">if</span> (pred <span style="color:#99d1db;font-weight:bold">!=</span> <span style="color:#ef9f76">null</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#737994;font-style:italic">// 将当前节点的 prev 指向刚才的尾部节点，那么当前节点应该设置为尾部节点</span>
</span></span><span style="display:flex;"><span>  node.<span style="color:#8caaee">prev</span> <span style="color:#99d1db;font-weight:bold">=</span> pred;
</span></span><span style="display:flex;"><span>  <span style="color:#737994;font-style:italic">// CAS 将 tail 节点设置为当前节点</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ca9ee6">if</span> (compareAndSetTail(pred, node)) {
</span></span><span style="display:flex;"><span>   <span style="color:#737994;font-style:italic">// 将之前尾节点的 next 设置为当前节点</span>
</span></span><span style="display:flex;"><span>   pred.<span style="color:#8caaee">next</span> <span style="color:#99d1db;font-weight:bold">=</span> node;
</span></span><span style="display:flex;"><span>   <span style="color:#737994;font-style:italic">// 返回当前节点</span>
</span></span><span style="display:flex;"><span>   <span style="color:#ca9ee6">return</span> node;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> enq(node);
</span></span><span style="display:flex;"><span> <span style="color:#ca9ee6">return</span> node;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#737994;font-style:italic">// 自旋CAS插入等待队列</span>
</span></span><span style="display:flex;"><span><span style="color:#e78284">private</span> Node <span style="color:#8caaee">enq</span>(<span style="color:#e78284">final</span> Node node) {
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">for</span> (;;) {
</span></span><span style="display:flex;"><span>        Node t <span style="color:#99d1db;font-weight:bold">=</span> tail;
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">if</span> (t <span style="color:#99d1db;font-weight:bold">==</span> <span style="color:#ef9f76">null</span>) { <span style="color:#737994;font-style:italic">// Must initialize</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ca9ee6">if</span> (compareAndSetHead(<span style="color:#ca9ee6">new</span> Node()))
</span></span><span style="display:flex;"><span>                tail <span style="color:#99d1db;font-weight:bold">=</span> head;
</span></span><span style="display:flex;"><span>        } <span style="color:#ca9ee6">else</span> {
</span></span><span style="display:flex;"><span>            node.<span style="color:#8caaee">prev</span> <span style="color:#99d1db;font-weight:bold">=</span> t;
</span></span><span style="display:flex;"><span>            <span style="color:#ca9ee6">if</span> (compareAndSetTail(t, node)) {
</span></span><span style="display:flex;"><span>                t.<span style="color:#8caaee">next</span> <span style="color:#99d1db;font-weight:bold">=</span> node;
</span></span><span style="display:flex;"><span>                <span style="color:#ca9ee6">return</span> t;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>在队列的尾部插入新的 Node 节点，但是需要注意的是由于 AQS 中会存在多个线程同时争夺资源的情况，因此肯定会出现多个线程同时插入节点的操作，在这里是通过 CAS 自旋的方式保证了操作的线程安全性。</p>
<h5 id="释放资源">释放资源<a class="td-heading-self-link" href="#%e9%87%8a%e6%94%be%e8%b5%84%e6%ba%90" aria-label="Heading self-link"></a></h5>
<div class="highlight"><pre tabindex="0" style="color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e78284">public</span> <span style="color:#e78284">final</span> <span style="color:#e78284">boolean</span> <span style="color:#8caaee">release</span>(<span style="color:#e78284">int</span> arg) {
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">if</span> (tryRelease(arg)) {
</span></span><span style="display:flex;"><span>        Node h <span style="color:#99d1db;font-weight:bold">=</span> head;
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">if</span> (h <span style="color:#99d1db;font-weight:bold">!=</span> <span style="color:#ef9f76">null</span> <span style="color:#99d1db;font-weight:bold">&amp;&amp;</span> h.<span style="color:#8caaee">waitStatus</span> <span style="color:#99d1db;font-weight:bold">!=</span> 0)
</span></span><span style="display:flex;"><span>            unparkSuccessor(h);
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">return</span> <span style="color:#ef9f76">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">return</span> <span style="color:#ef9f76">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e78284">private</span> <span style="color:#e78284">void</span> <span style="color:#8caaee">unparkSuccessor</span>(Node node) {
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 如果状态是负数，尝试把它设置为0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e78284">int</span> ws <span style="color:#99d1db;font-weight:bold">=</span> node.<span style="color:#8caaee">waitStatus</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">if</span> (ws <span style="color:#99d1db;font-weight:bold">&lt;</span> 0)
</span></span><span style="display:flex;"><span>        compareAndSetWaitStatus(node, ws, 0);
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 得到头结点的后继结点head.next</span>
</span></span><span style="display:flex;"><span>    Node s <span style="color:#99d1db;font-weight:bold">=</span> node.<span style="color:#8caaee">next</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 如果这个后继结点为空或者状态大于0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 通过前面的定义我们知道，大于0只有一种可能，就是这个结点已被取消（只有 Node.CANCELLED(=1) 这一种状态大于0）</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">if</span> (s <span style="color:#99d1db;font-weight:bold">==</span> <span style="color:#ef9f76">null</span> <span style="color:#99d1db;font-weight:bold">||</span> s.<span style="color:#8caaee">waitStatus</span> <span style="color:#99d1db;font-weight:bold">&gt;</span> 0) {
</span></span><span style="display:flex;"><span>        s <span style="color:#99d1db;font-weight:bold">=</span> <span style="color:#ef9f76">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#737994;font-style:italic">// 从尾部开始倒着寻找第一个还未取消的节点（真正的后继者）</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ca9ee6">for</span> (Node t <span style="color:#99d1db;font-weight:bold">=</span> tail; t <span style="color:#99d1db;font-weight:bold">!=</span> <span style="color:#ef9f76">null</span> <span style="color:#99d1db;font-weight:bold">&amp;&amp;</span> t <span style="color:#99d1db;font-weight:bold">!=</span> node; t <span style="color:#99d1db;font-weight:bold">=</span> t.<span style="color:#8caaee">prev</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#ca9ee6">if</span> (t.<span style="color:#8caaee">waitStatus</span> <span style="color:#99d1db;font-weight:bold">&lt;=</span> 0)
</span></span><span style="display:flex;"><span>                s <span style="color:#99d1db;font-weight:bold">=</span> t;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#737994;font-style:italic">// 如果后继结点不为空，</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ca9ee6">if</span> (s <span style="color:#99d1db;font-weight:bold">!=</span> <span style="color:#ef9f76">null</span>)
</span></span><span style="display:flex;"><span>        LockSupport.<span style="color:#8caaee">unpark</span>(s.<span style="color:#8caaee">thread</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>如果<code>tryRelease(arg)</code>成功释放了锁，那么接下来会检查队列的头结点。如果头结点存在并且waitStatus不为0（这意味着有线程在等待），那么会调用<code>unparkSuccessor(Node h)</code>方法来唤醒等待的线程。</p>

	<div class="td-page-meta__lastmod">
  Last modified February 9, 2025: <a href="https://github.com/google/docsy-example/commit/2b40881d8efd40b5043be69f2da6dd9c11c25cdd">workflows (2b40881)</a>
</div>

</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="User mailing list" aria-label="User mailing list">
    <a target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Twitter" aria-label="Twitter">
    <a target="_blank" rel="noopener" href="https://example.org/twitter" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Stack Overflow" aria-label="Stack Overflow">
    <a target="_blank" rel="noopener" href="https://example.org/stack" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Slack" aria-label="Slack">
    <a target="_blank" rel="noopener" href="https://example.org/slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Developer mailing list" aria-label="Developer mailing list">
    <a target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Developer mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025&ndash;2025
    <span class="td-footer__authors">海阔知识库 | <a href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a> |</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><span class="ms-2"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.js"></script>
<script defer src="/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>